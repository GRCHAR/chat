# èŠå¤©æœåŠ¡å¿«é€Ÿå¯åŠ¨æŒ‡å—

## é¡¹ç›®å·²æˆåŠŸåˆ›å»ºï¼ğŸ‰

### é¡¹ç›®ç‰¹æ€§
âœ… **é«˜æ€§èƒ½æ¶æ„**: æ”¯æŒ10,000+ç”¨æˆ·åŒæ—¶åœ¨çº¿  
âœ… **å®Œæ•´åŠŸèƒ½**: å•èŠã€ç¾¤èŠã€å†å²æ¶ˆæ¯ã€å®æ—¶æ¨é€  
âœ… **ç°ä»£æŠ€æœ¯æ ˆ**: Gin + GORM + Redis + RabbitMQ + WebSocket  
âœ… **ç”Ÿäº§å°±ç»ª**: å®Œæ•´çš„Dockeræ”¯æŒã€æµ‹è¯•ã€æ–‡æ¡£  

### å¿«é€Ÿå¯åŠ¨

#### 1. ä½¿ç”¨Docker Composeï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f chat-service

# åœæ­¢æœåŠ¡
docker-compose down
```

#### 2. æœ¬åœ°å¼€å‘æ¨¡å¼

```bash
# å®‰è£…ä¾èµ–
make deps

# å¯åŠ¨æœåŠ¡
make run

# æˆ–è€…
go run cmd/server/main.go
```

### APIç«¯ç‚¹

#### è®¤è¯
- `POST /api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/v1/auth/login` - ç”¨æˆ·ç™»å½•

#### èŠå¤©åŠŸèƒ½
- `GET /api/v1/rooms` - è·å–èŠå¤©å®¤åˆ—è¡¨
- `POST /api/v1/rooms` - åˆ›å»ºèŠå¤©å®¤
- `GET /api/v1/rooms/{id}/messages` - è·å–èŠå¤©è®°å½•
- `GET /api/v1/ws` - WebSocketè¿æ¥

### WebSocketæ¶ˆæ¯æ ¼å¼

```json
{
  "type": "message",
  "room_id": 1,
  "content": "Hello, World!"
}
```

### æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
make test

# æ„å»ºé¡¹ç›®
make build

# ç”Ÿäº§æ„å»º
make build-prod
```

### é…ç½®è¯´æ˜

ä¸»è¦é…ç½®æ–‡ä»¶: `config.yaml`

- **æ•°æ®åº“**: MySQL 8.0
- **ç¼“å­˜**: Redis 6.0
- **æ¶ˆæ¯é˜Ÿåˆ—**: RabbitMQ 3.8
- **æœåŠ¡ç«¯å£**: 8080

### é¡¹ç›®ç»“æ„

```
chat-service/
â”œâ”€â”€ cmd/server/          # åº”ç”¨å…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ api/            # HTTP API
â”‚   â”œâ”€â”€ config/         # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database/       # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ service/        # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ websocket/      # WebSocketå¤„ç†
â”œâ”€â”€ pkg/
â”‚   â”œâ”€â”€ cache/          # Redisç¼“å­˜
â”‚   â”œâ”€â”€ queue/          # æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”œâ”€â”€ docker-compose.yml  # Dockerç¼–æ’
â”œâ”€â”€ config.yaml         # é…ç½®æ–‡ä»¶
â””â”€â”€ README.md          # è¯¦ç»†æ–‡æ¡£
```

### æ€§èƒ½ç‰¹æ€§

- **è¿æ¥æ± ä¼˜åŒ–**: æ•°æ®åº“å’ŒRedisè¿æ¥æ± 
- **æ¶ˆæ¯ç¼“å­˜**: æœ€è¿‘æ¶ˆæ¯Redisç¼“å­˜
- **å¼‚æ­¥å¤„ç†**: RabbitMQæ¶ˆæ¯é˜Ÿåˆ—
- **WebSocket Hub**: é«˜æ•ˆè¿æ¥ç®¡ç†
- **é™æµä¿æŠ¤**: APIé™æµä¸­é—´ä»¶

### ç›‘æ§æŒ‡æ ‡

- å¹¶å‘WebSocketè¿æ¥æ•°
- æ¶ˆæ¯ååé‡ (ç›®æ ‡: 1000+ æ¶ˆæ¯/ç§’)
- ç³»ç»Ÿèµ„æºä½¿ç”¨ç‡
- APIå“åº”æ—¶é—´

### éƒ¨ç½²å»ºè®®

1. **å¼€å‘ç¯å¢ƒ**: ä½¿ç”¨Docker Compose
2. **æµ‹è¯•ç¯å¢ƒ**: å•ç‹¬éƒ¨ç½²å„ä¸ªç»„ä»¶
3. **ç”Ÿäº§ç¯å¢ƒ**: Kubernetesé›†ç¾¤éƒ¨ç½²

### æ‰©å±•åŠŸèƒ½

å¯ä»¥åŸºäºæ­¤é¡¹ç›®æ‰©å±•ï¼š
- æ–‡ä»¶ä¸Šä¼ å’Œåˆ†äº«
- è¯­éŸ³/è§†é¢‘é€šè¯
- æ¶ˆæ¯æœç´¢åŠŸèƒ½
- ç”¨æˆ·æƒé™ç®¡ç†
- å¤šç«¯æ¶ˆæ¯åŒæ­¥
- æ¶ˆæ¯åŠ å¯†
- ç¦»çº¿æ¶ˆæ¯æ¨é€

---

**é¡¹ç›®å·²å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹æ‚¨çš„èŠå¤©æœåŠ¡å¼€å‘ä¹‹æ—…ï¼** ğŸš€
